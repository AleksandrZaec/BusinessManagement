# BusinessManagement

Backend веб-приложения для внутреннего управления командами и задачами внутри компании.
### Система позволит:

- Регистрироваться и управлять аккаунтами пользователей
- Создавать команды (компании) и управлять ими
- Назначать задачи сотрудникам и отслеживать их выполнение
- Оценивать работу сотрудников
- Создавать встречи и просматривать календарь событий


## Стек технологий

- **Python** 3.12
- **Django** 5.2.2
- **Django REST Framework** 3.16.0
- **PostgreSQL** (база данных)
- **Simple JWT (djangorestframework-simplejwt)**
- **DRF Spectacular (документация API)**
- **python-dotenv (переменные окружения)**


## Функциональность проекта

### Пользователи
- Регистрация по email и паролю
- Авторизация / выход из системы
- Роли: пользователь, менеджер, админ команды
- Обновление профиля и удаление аккаунта

### Команды
- Создание команды (только админ)
- Управление участниками (добавление / удаление)
- Просмотр состава команды

### Задачи

- Создание задач (менеджером)
- Назначение исполнителей
- Статусы задач: открыто, в работе, выполнено
- Дедлайн, описание, изменение и удаление
- Упрощённый чат внутри задачи (комментарии)

### Оценка работы

- Оценка задач по шкале от 1 до 5
- Просмотр всех полученных оценок пользователем
- Подсчёт средней оценки за период

### Встречи

- Назначение встречи: дата, время, участники
- Проверка пересечений по времени
- Просмотр списка встреч пользователем
- Отмена встреч

### Календарь

- Отображение задач и встреч по дням
- Режимы: дневной и месячный
- Автоматическая подгрузка событий

### Админ-панель

- Административная панель Django
- Управление пользователями, командами, задачами, встречами и оценками

## Установка и запуск проекта


### 1. Клонирование репозитория

```sh
 git clone https://github.com/AleksandrZaec/BusinessManagement.git
```

### 2. В корне проекта создайте файл .env и заполните его по образцу env_example

### 3. Для запуска проекта с помощью докера используйте команду

```sh
 docker-compose up -d --build
```

Приложение будет доступно по адресу: `http://127.0.0.1:8000/`

Для запуска тестов используйте команду:

```sh
 docker-compose run test
```

### 4. Для запуска проекта без контейнеризации (Docker):

Установите зависимости командой
```sh
 poetry shell
```
Примените миграции в бае данных командой
```sh
 python manage.py migrate
```
Запустите сервер командой
```sh
python manage.py runserver
```

Для запуска тестов используйте команду
```sh
python manage.py test
```

Для регистрации суперпользователя
```sh
python manage.py csu
```

### Документация
После запуска сервера документацию будет доступна по следующим адресам:

```sh
http://localhost:8000//docs/ 
```
и
```sh
http://localhost:8000//swagger/ 
```


## Authentication

| Endpoint               | Method | Description                          |
|------------------------|--------|--------------------------------------|
| `/user/login/`         | POST   | Получение JWT токена                |
| `/user/token/refresh/` | POST   | Обновление JWT токена               |
| `/user/register/`      | POST   | Регистрация нового пользователя     |

## Users

| Endpoint                          | Method | Description                          |
|-----------------------------------|--------|--------------------------------------|
| `/user/users/`                    | GET    | Список всех пользователей           |
| `/user/update/<int:pk>/`          | PUT    | Обновление данных пользователя      |
| `/user/delete/<int:pk>/`          | DELETE | Удаление пользователя               |
| `/user/average-score/<int:pk>/`   | GET    | Получение среднего балла пользователя |

## Teams

| Endpoint                     | Method | Description                      |
|------------------------------|--------|----------------------------------|
| `/team/teams/`               | GET    | Список всех команд              |
| `/team/create/`              | POST   | Создание новой команды         |
| `/team/retrieve/<int:pk>/`   | GET    | Получение информации о команде  |
| `/team/update/<int:pk>/`     | PUT    | Обновление информации о команде |
| `/team/destroy/<int:pk>/`    | DELETE | Удаление команды                |

## Tasks

| Endpoint                     | Method | Description                      |
|------------------------------|--------|----------------------------------|
| `/task/tasks/`               | GET    | Список всех задач               |
| `/task/tasks/<pk>/`          | GET    | Получение конкретной задачи     |
| `/task/comments/`            | GET    | Список комментариев             |
| `/task/comments/<pk>/`       | GET    | Получение конкретного комментария |

## Meetings

| Endpoint                     | Method | Description                      |
|------------------------------|--------|----------------------------------|
| `/meeting/`                  | GET    | Список всех встреч              |
| `/meeting/<pk>/`             | GET    | Получение конкретной встречи    |
| `/meeting/my-meetings/`      | GET    | Список встреч текущего пользователя |

## Evaluations

| Endpoint                     | Method | Description                      |
|------------------------------|--------|----------------------------------|
| `/evaluation/`               | GET    | Список всех оценок              |
| `/evaluation/<pk>/`          | GET    | Получение конкретной оценки     |

## Calendar

| Endpoint             | Method | Description                  |
|----------------------|--------|------------------------------|
| `/calendar/calendar/`| GET    | Получение календарных данных |

## Documentation

| Endpoint      | Description                          |
|---------------|--------------------------------------|
| `/swagger/`   | Swagger UI документация             |
| `/redoc/`     | ReDoc документация                  |
| `/schema/`    | Схема API (OpenAPI)                |

## Admin Panel

Все административные endpoint'ы доступны по префиксу `/admin/`:
- Управление пользователями (`/admin/users/user/`)
- Управление командами (`/admin/teams/team/`)
- Управление задачами (`/admin/tasks/task/`)
- Управление встречами (`/admin/meetings/meeting/`)
- Управление оценками (`/admin/evaluations/evaluation/`)